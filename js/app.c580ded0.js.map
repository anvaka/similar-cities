{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?7e02","webpack:///./src/App.vue?671d","webpack:///./src/lib/LineCollection.js","webpack:///./src/lib/PointCollection.js","webpack:///./src/lib/bus.js","webpack:///./src/config.js","webpack:///./src/lib/createGraphScene.js","webpack:///./src/Tooltip.vue?c0f1","webpack:///src/Tooltip.vue","webpack:///./src/Tooltip.vue?9aac","webpack:///./src/Tooltip.vue","webpack:///./src/CityName.vue?32f4","webpack:///src/CityName.vue","webpack:///./src/CityName.vue?49a5","webpack:///./src/CityName.vue","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue?bff9","webpack:///./src/lib/fileDrop.js","webpack:///./src/lib/loadDroppedGraph.js","webpack:///./src/main.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","loaded","_e","staticClass","_v","details","on","$event","preventDefault","listVisible","_s","listToggleHeader","directives","rawName","expression","domProps","target","composing","filterValue","staticStyle","filteredNodes","itemComponent","_m","goBackHeader","main","getLink","id","image","_l","related","index","score","handleImageClick","style","left","tooltip","x","top","y","staticRenderFns","LineCollection","gl","options","program","defineProgram","vertex","fragment","attributes","color","ColorAttribute","instanced","point","InstancedAttribute","width","setCount","_","drawContext","uniforms","modelViewProjection","resolution","height","draw","cb","count","getCount","from","z","to","GLCollection","PointCollection","preDrawHook","postDrawHook","bus","eventify","config","imageEndpoint","createGraphScene","canvas","graph","scene","nodes","lines","highlightedNodes","firstLevelArrows","spatialIndex","RBush","nodeSize","layout","getNodePosition","nodeId","getNode","position","fetch","then","text","loadGraph","fromDot","dispose","getDetails","showNode","clearHighlights","clear","updateViewBox","node","hlNode","ui","size","add","forEachLinkedNode","other","link","linkUI","setViewBox","right","bottom","renderFrame","info","getNodeDetails","weight","sort","a","b","getImageForId","newGraph","disposeScene","initScene","handleClick","handleMove","initUIElements","updateSpatialIndex","fire","createScene","setClearColor","initialSceneSize","getGL","capacity","getNodesCount","forEachNode","uiId","getLinksCount","forEachLink","fromId","toId","line","appendChild","insert","minX","minY","maxX","maxY","e","findNearest","undefined","originalEvent","clientX","clientY","neighborIds","knn","neighbor","dist","Math","hypot","off","src","props","methods","component","focusNode","source","components","Tooltip","VirtualList","CityName","computed","filter","showTooltip","clearTimeout","tooltipTimeout","setTimeout","maxSize","windowWidth","hideTooltip","showPanel","unsorted","localeCompare","showDetails","event","ctrlKey","metaKey","mounted","beforeDestroy","fileDrop","dropHandler","onDropped","addEventListener","handleDrop","handleDragOver","prevent","handleDragEnd","removeEventListener","hasFiles","ev","file","dt","dataTransfer","files","items","kind","getAsFile","classList","remove","loadDroppedGraph","reader","FileReader","tryDot","fileContent","console","log","tryJson","fromJson","JSON","parse","readAsText","onload","content","onerror","Vue","productionTip","render","h","App","$mount","document","body"],"mappings":"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","file":"js/app.c580ded0.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[(!_vm.loaded)?_c('div',{staticClass:\"loading\"},[_vm._v(\" Downloading the graph of cities... \")]):_vm._e(),(_vm.loaded)?_c('div',{staticClass:\"sidebar\"},[(!_vm.details)?_c('div',[_c('div',{staticClass:\"control-panel\"},[_c('a',{staticClass:\"btn-header\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.listVisible = !_vm.listVisible}}},[_vm._v(_vm._s(_vm.listToggleHeader))])]),(_vm.listVisible)?_c('div',{staticClass:\"list-container\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.filterValue),expression:\"filterValue\"}],staticClass:\"filter-box\",attrs:{\"type\":\"search\",\"placeholder\":\"Filter\"},domProps:{\"value\":(_vm.filterValue)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.filterValue=$event.target.value}}}),_c('virtual-list',{staticStyle:{\"height\":\"360px\",\"overflow-y\":\"auto\"},attrs:{\"estimate-size\":32,\"data-key\":'id',\"data-sources\":_vm.filteredNodes,\"data-component\":_vm.itemComponent}})],1):_vm._e(),(!_vm.details && !_vm.listVisible)?_c('div',{staticClass:\"about\"},[_c('p',[_vm._v(\" Each dot is a city. Cities that have similar road networks are connected by an edge. \")]),_vm._m(0)]):_vm._e()]):_vm._e(),(_vm.details)?_c('div',[_c('a',{staticClass:\"btn-header\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();_vm.details=null}}},[_vm._v(_vm._s(_vm.goBackHeader))]),_c('div',[_c('p',{staticClass:\"main-title\",attrs:{\"title\":_vm.details.main.name}},[_vm._v(_vm._s(_vm.details.main.name))]),_c('a',{attrs:{\"href\":_vm.getLink(_vm.details.main.id),\"target\":\"_blank\"}},[_c('img',{staticClass:\"main-image\",attrs:{\"src\":_vm.details.main.image,\"alt\":_vm.details.main.name}})])]),_vm._m(1),_c('div',{staticClass:\"secondary\"},_vm._l((_vm.details.related),function(related,index){return _c('div',{key:index,staticClass:\"related\"},[_c('p',{attrs:{\"title\":related.name}},[_c('span',{staticClass:\"score\"},[_vm._v(_vm._s(related.score))]),_vm._v(\" \"+_vm._s(related.name))]),_c('a',{attrs:{\"href\":_vm.getLink(related.id),\"target\":\"_blank\",\"title\":related.name},on:{\"click\":function($event){return _vm.handleImageClick(related.id, $event)}}},[_c('img',{staticClass:\"related-image\",attrs:{\"src\":related.image,\"alt\":related.name}})])])}),0)]):_vm._e()]):_vm._e(),_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.tooltip)?_c('tooltip',{staticClass:\"tooltip\",style:({left: _vm.tooltip.x + 'px', top: _vm.tooltip.y + 'px'}),attrs:{\"data\":_vm.tooltip}}):_vm._e()],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',{staticClass:\"byline\"},[_vm._v(\" Created by \"),_c('a',{attrs:{\"href\":\"https://twitter.com/anvaka\"}},[_vm._v(\"@anvaka\")]),_c('a',{staticClass:\"more-info\",attrs:{\"href\":\"https://github.com/anvaka/similar-cities\"}},[_vm._v(\"more info\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',{staticClass:\"info\"},[_vm._v(\" City roads below are sorted by decreasing \"),_c('span',{staticClass:\"score\"},[_vm._v(\"similarity\")]),_vm._v(\". \")])}]\n\nexport { render, staticRenderFns }","import {GLCollection, defineProgram, InstancedAttribute, ColorAttribute} from 'w-gl';\n\nexport default class LineCollection extends GLCollection {\n  constructor(gl, options = {}) {\n    let program = defineProgram({\n      gl,\n      vertex: `\n    uniform mat4 modelViewProjection;\n    uniform float width;\n    uniform vec2 resolution;\n\n    attribute vec4 color;\n    attribute vec3 from, to;\n    attribute vec2 point;\n\n    varying vec4 vColor;\n    varying vec2 vPoint;\n\n    void main() {\n      vec4 clip0 = modelViewProjection * vec4(from, 1.0);\n      vec4 clip1 = modelViewProjection * vec4(to, 1.0);\n\n      vec2 screen0 = resolution * (0.5 * clip0.xy/clip0.w + 0.5);\n      vec2 screen1 = resolution * (0.5 * clip1.xy/clip1.w + 0.5);\n\n      vec2 xBasis = normalize(screen1 - screen0);\n      vec2 yBasis = vec2(-xBasis.y, xBasis.x);\n\n      // Offset the original points:\n      vec2 pt0 = screen0 + width * point.x * yBasis;\n      vec2 pt1 = screen1 + width * point.x * yBasis;\n\n      vec2 pt = mix(pt0, pt1, point.y);\n      vec4 clip = mix(clip0, clip1, point.y);\n\n      gl_Position = vec4(clip.w * (2.0 * pt/resolution - 1.0), clip.z, clip.w);\n      vColor = color.abgr; // mix(.abgr, aToColor.abgr, aPosition.y);\n    }`,\n\n      fragment: `\n    precision highp float;\n    varying vec4 vColor;\n\n    void main() {\n      gl_FragColor = vColor;\n    }`,\n      attributes: {\n        color: new ColorAttribute()\n      },\n      instanced: {\n        point: new InstancedAttribute([\n          -0.5, 0, -0.5, 1, 0.5, 1, // First 2D triangle of the quad\n          -0.5, 0, 0.5, 1, 0.5, 0   // Second 2D triangle of the quad\n        ])\n      }\n    });\n    super(program);\n    this.width = options.width || 2;\n  }\n\n  clear() {\n    this.program.setCount(0);\n  }\n\n  draw(_, drawContext) {\n    if (!this.uniforms) {\n      this.uniforms = {\n        modelViewProjection: this.modelViewProjection,\n        width: this.width,\n        resolution: [drawContext.width, drawContext.height]\n      }\n    }\n    this.uniforms.resolution[0] = drawContext.width;\n    this.uniforms.resolution[1] = drawContext.height;\n    this.program.draw(this.uniforms);\n  }\n\n  // implement lineRenderTrait to allow SVG export via w-gl\n  forEachLine(cb) {\n    let count = this.program.getCount()\n    for (let i = 0; i < count; ++i) {\n      let vertex = this.program.get(i);\n      let from = { x: vertex.from[0], y: vertex.from[1], z: vertex.from[2], color: vertex.color }\n      let to = { x: vertex.to[0], y: vertex.to[1], z: vertex.to[2], color: vertex.color }\n      cb(from, to);\n    }\n  }\n\n  getLineColor(from) {\n    let count = this.program.getCount()\n    let c = from ? \n              from.color :  \n              count > 0 ? this.program.get(0).color : 0xFFFFFFFF;\n\n    return [\n      (c >> 24) & 0xFF / 255,\n      (c >> 16) & 0xFF / 255,\n      (c >>  8) & 0xFF / 255,\n      (c >>  0) & 0xFF / 255,\n    ]\n  }\n}","\nimport {GLCollection, defineProgram, ColorAttribute, InstancedAttribute} from 'w-gl';\n\nexport default class PointCollection extends GLCollection {\n  constructor(gl) {\n    let program = defineProgram({\n      gl,\n      vertex: `\n  uniform mat4 modelViewProjection;\n\n  attribute float size;\n  attribute vec3 position;\n  attribute vec4 color;\n\n  attribute vec2 point; // instanced\n\n  varying vec4 vColor;\n  varying vec2 vPoint;\n  void main() {\n    gl_Position = modelViewProjection * vec4(position + vec3(point * size, 0.), 1.0);\n    vColor = color.abgr;\n    vPoint = point;\n  }`,\n\n      fragment: `\n  precision highp float;\n  varying vec4 vColor;\n  varying vec2 vPoint;\n  void main() {\n    float dist = length(vPoint);\n    if (dist >= 0.5) {discard;}\n    gl_FragColor = vColor;\n  }`,\n      // These are just overrides:\n      attributes: {\n        color: new ColorAttribute(),\n      },\n      instanced: {\n        point: new InstancedAttribute([\n          -0.5, -0.5, -0.5,  0.5, 0.5,  0.5,\n          0.5,  0.5, 0.5, -0.5, -0.5, -0.5,\n        ])\n      },\n\n      preDrawHook(/* programInfo */) {\n        return `gl.enable(gl.DEPTH_TEST);\n        gl.depthFunc(gl.LEQUAL);`;\n      },\n      postDrawHook() {\n        return 'gl.disable(gl.DEPTH_TEST);';\n      },\n    });\n\n    super(program);\n  }\n\n  clear() {\n    this.program.setCount(0);\n  }\n}\n","import eventify from 'ngraph.events';\n\nconst bus = eventify({});\n\nexport default bus;","const config = {\n  imageEndpoint: 'https://anvaka.github.io/similar-cities-data/'\n}\nexport default config;","import {createScene} from 'w-gl';\nimport LineCollection from './LineCollection';\nimport PointCollection from './PointCollection';\nimport bus from './bus';\nimport RBush from 'rbush';\nimport knn from 'rbush-knn';\nimport fromDot from 'ngraph.fromdot';\nimport config from '../config';\n\nexport default function createGraphScene(canvas) {\n  const spatialIndex = new RBush();\n  const nodeSize = 4;\n\n  // Since graph can be loaded dynamically, we have these uninitialized\n  // and captured into closure. loadGraph will do the initialization\n  let graph, layout = {\n    getNodePosition(nodeId) {\n      return graph.getNode(nodeId).data.position;\n    }\n  };\n  let scene, nodes, lines;\n  let highlightedNodes;\n  let firstLevelArrows;\n\n\n  fetch('distance.dot', {mode: 'cors'}).then(x => x.text()).then(x => {\n    loadGraph(fromDot(x));\n  });\n\n  return {\n    dispose,\n    getDetails,\n    showNode\n  };\n  \n  function clearHighlights() {\n    highlightedNodes.clear();\n    firstLevelArrows.clear();\n  }\n  function showNode(nodeId, updateViewBox) {\n    clearHighlights();\n    let node = graph.getNode(nodeId);\n    const hlNode = {...node.ui};\n    hlNode.color = 0xBF2172ff;\n    hlNode.size *= 1.2;\n    highlightedNodes.add(hlNode);\n\n\n    graph.forEachLinkedNode(nodeId, (other, link) => {\n      let color = 0x90ee90ff;\n\n      const hlNode = {...other.ui};\n      hlNode.color = color;\n      highlightedNodes.add(hlNode);\n      let linkUI = {...link.ui};\n      linkUI.color = 0xffffffff;\n      firstLevelArrows.add(linkUI);\n    });\n\n    if (updateViewBox) {\n      let { x, y } = node.data;\n      let size = 20;\n      scene.setViewBox({\n        left: x - size,\n        top: y - size,\n        right: x + size,\n        bottom: y + size,\n      });\n    }\n    scene.renderFrame()\n  }\n\n  function getDetails(nodeId) {\n    let related = [];\n    graph.forEachLinkedNode(nodeId, (other, link) => {\n      let info = getNodeDetails(other.id);\n      info.score = link.data.weight;\n      related.push(info);\n    });\n    related.sort((a, b) => b.score - a.score);\n    return {\n      main: getNodeDetails(nodeId),\n      related\n    }\n  }\n\n  function getNodeDetails(nodeId) {\n    let from = graph.getNode(nodeId);\n    return {\n      id: nodeId,\n      name: from.data.name,\n      image: getImageForId(nodeId)\n    }\n  }\n\n  function getImageForId(id) {\n    return config.imageEndpoint + id+ '.png'\n  }\n\n  function loadGraph(newGraph) {\n    if (scene) {\n      disposeScene();\n    }\n    scene = initScene();\n    scene.on('click', handleClick);\n    scene.on('mousemove', handleMove);\n    graph = newGraph\n    window.graph = graph;\n\n    initUIElements();\n    updateSpatialIndex();\n\n    // drawGraph();\n    scene.renderFrame();\n    bus.fire('graph-ready', graph)\n  }\n\n  function initScene() {\n    let scene = createScene(canvas);\n    scene.setClearColor(12/255, 41/255, 82/255, 1)\n    let initialSceneSize = 200;\n    scene.setViewBox({\n      left:  -initialSceneSize,\n      top:   -initialSceneSize,\n      right:  initialSceneSize,\n      bottom: initialSceneSize,\n    });\n    return scene;\n  }\n  \n  function initUIElements() {\n    nodes = new PointCollection(scene.getGL(), {\n      capacity: graph.getNodesCount()\n    });\n\n    graph.forEachNode(node => {\n      let size = nodeSize;\n      if (node.data && node.data.size) {\n        size = node.data.size;\n      } else {\n        if (!node.data) node.data = {};\n        node.data.size = size;\n      }\n      let {x, y} = node.data;\n      node.data.position = [x, y, 0];\n      node.ui = {size, position: node.data.position, color: node.data.color || 0x90f8fcff};\n      node.uiId = nodes.add(node.ui);\n    });\n\n    lines = new LineCollection(scene.getGL(), { capacity: graph.getLinksCount() });\n    highlightedNodes = new PointCollection(scene.getGL());\n    firstLevelArrows = new LineCollection(scene.getGL(), {width: 6})\n\n    graph.forEachLink(link => {\n      var from = layout.getNodePosition(link.fromId);\n      var to = layout.getNodePosition(link.toId);\n      var line = { from, to, color: 0xFFFFFF20 };\n      link.ui = line;\n      link.uiId = lines.add(link.ui);\n    });\n\n    scene.appendChild(lines);\n    scene.appendChild(nodes);\n    scene.appendChild(firstLevelArrows);\n    scene.appendChild(highlightedNodes);\n  }\n\n  function updateSpatialIndex() {\n    spatialIndex.clear();\n    graph.forEachNode(node => {\n      var {x, y} = node.data;\n      spatialIndex.insert({\n        minX: x - nodeSize,\n        minY: y - nodeSize,\n        maxX: x + nodeSize,\n        maxY: y + nodeSize,\n        point: node.data,\n        id: node.id\n      });\n    })\n  }\n\n  function handleClick(e) {\n    let id = findNearest(e.x, e.y);\n    if (id !== undefined) {\n      bus.fire('focus-node', id);\n    }\n  }\n\n  function handleMove(e) {\n    let id = findNearest(e.x, e.y);\n    if (id !== undefined) {\n      bus.fire('show-tooltip', {\n        x: e.originalEvent.clientX,\n        y: e.originalEvent.clientY,\n        data: id,\n      });\n      return;\n    }\n\n    bus.fire('show-tooltip', null);\n  }\n\n  function findNearest(x, y) {\n    const neighborIds = knn(spatialIndex, x, y, 1);\n    let neighbor = neighborIds[0];\n    if (neighbor === undefined) return;\n    let point = neighbor.point;\n    let dist = Math.hypot(x - point.x, y - point.y);\n    if (dist < nodeSize / 2) return neighbor.id;\n  }\n\n  function dispose() {\n    if (scene) scene.dispose();\n    bus.off('load-graph', loadGraph);\n  }\n\n  function disposeScene() {\n    scene.off('click', handleClick);\n    scene.off('mousemove', handleMove);\n    scene.dispose();\n    scene = null\n  }\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('img',{attrs:{\"src\":_vm.src,\"alt\":\"city screenshot\"}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div>\n  <img :src=\"src\" alt='city screenshot' />\n</div>\n</template>\n<script>\nimport config from './config';\n\nexport default {\n  props: ['data'],\n  data() {\n    return {\n      src: config.imageEndpoint + this.data.data + '.png'\n    }\n  },\n  methods: {\n  }\n}\n</script>","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tooltip.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tooltip.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Tooltip.vue?vue&type=template&id=20b59aaf&\"\nimport script from \"./Tooltip.vue?vue&type=script&lang=js&\"\nexport * from \"./Tooltip.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{staticClass:\"city-name\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.focusNode()}}},[_vm._v(_vm._s(_vm.source.name))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <a @click.prevent='focusNode()' class='city-name' href='#'>{{ source.name }}</a>\n</template>\n\n<script>\nimport bus from './lib/bus';\n\nexport default {\n    name: 'city-name',\n    props: {\n      index: { // index of current item\n        type: Number\n      },\n      source: { // here is: {uid: 'unique_1', text: 'abc'}\n        type: Object,\n        default () {\n          return {}\n        }\n      }\n    },\n    methods: {\n      focusNode() {\n        bus.fire('focus-node', this.source.id, true);\n      }\n    }\n  }\n</script>","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./CityName.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./CityName.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CityName.vue?vue&type=template&id=78380ec3&\"\nimport script from \"./CityName.vue?vue&type=script&lang=js&\"\nexport * from \"./CityName.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"app\">\n    <div class='loading' v-if='!loaded'>\n      Downloading the graph of cities...\n    </div>\n    <div class=\"sidebar\" v-if='loaded'>\n      <div v-if='!details'>\n        <div class='control-panel'>\n          <a href=\"#\" @click.prevent='listVisible = !listVisible' class='btn-header'>{{listToggleHeader}}</a>\n        </div>\n        <div v-if='listVisible' class='list-container'>\n          <input type='search' placeholder=\"Filter\" v-model='filterValue' class='filter-box'/>\n          <virtual-list style=\"height: 360px; overflow-y: auto;\"\n            :estimate-size=\"32\"\n            :data-key=\"'id'\"\n            :data-sources=\"filteredNodes\"\n            :data-component=\"itemComponent\"\n          />\n        </div>\n        <div v-if='!details && !listVisible' class='about'>\n          <p>\n          Each dot is a city. Cities that have similar road networks are connected by an edge.\n          </p>\n          <p class='byline'>\n            Created by <a href='https://twitter.com/anvaka'>@anvaka</a>\n            <a class='more-info' href='https://github.com/anvaka/similar-cities'>more info</a>\n          </p>\n        </div>\n      </div>\n      <div v-if='details'>\n        <a href=\"#\" @click.prevent='details=null' class='btn-header'>{{goBackHeader}}</a>\n        <div>\n          <p class='main-title' :title='details.main.name'>{{details.main.name}}</p>\n          <a :href='getLink(details.main.id)' target=\"_blank\">\n            <img :src='details.main.image' :alt='details.main.name' class='main-image'/>\n          </a>\n        </div>\n        <p class='info'>\n        City roads below are sorted by decreasing <span class='score'>similarity</span>.\n        </p>\n        <div class='secondary'>\n          <div class='related' v-for=\"(related, index) in details.related\" :key=\"index\">\n            <p :title='related.name'><span class='score'>{{related.score}}</span> {{related.name}}</p>\n            <a :href='getLink(related.id)' @click='handleImageClick(related.id, $event)' target=\"_blank\" :title='related.name'>\n              <img :src='related.image' :alt='related.name' class='related-image' />\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n    <transition name=\"fade\">\n      <tooltip v-if=\"tooltip\"\n        :style=\"{left: tooltip.x + 'px', top: tooltip.y + 'px'}\"\n        :data=\"tooltip\"\n        class=\"tooltip\"\n      ></tooltip>\n    </transition>\n  </div>\n</template>\n\n<script>\nimport createGraphScene from './lib/createGraphScene';\nimport bus from \"./lib/bus\";\nimport Tooltip from \"./Tooltip\";\nimport VirtualList from 'vue-virtual-scroll-list';\nimport CityName from './CityName.vue';\n\n\nexport default {\n  name: 'app',\n  components: {\n    Tooltip,\n    VirtualList\n  },\n  data() {\n    return {\n      itemComponent: CityName,\n      filterValue: '',\n      tooltip: null,\n      details: null,\n      loaded: false,\n      listVisible: false,\n      nodes: [],\n    };\n  },\n  computed: {\n    listToggleHeader() {\n      return this.listVisible ? 'Hide city list': 'Show city list';\n    },\n    goBackHeader() {\n      return 'Close'; \n    },\n    filteredNodes() {\n      let filterValue = this.filterValue;\n      let testRegex = new RegExp(filterValue, 'i');\n      return this.nodes.filter(x => !filterValue || x.name.match(testRegex));\n    }\n  },\n  methods: {\n    showTooltip(e) {\n      if (e) {\n        clearTimeout(this.tooltipTimeout);\n        this.tooltipTimeout = setTimeout(() => {\n          let windowWidth = window.innerWidth;\n          let windowHeight = window.innerHeight;\n          let maxSize = windowHeight > 900 ? 800 : windowHeight * .5;\n          if (e.y < maxSize) e.y += maxSize - e.y\n          if (e.x + maxSize > windowWidth) e.x -= maxSize;\n          if (e.x < 0) e.x = 0;\n          this.tooltip = e;\n        }, 150)\n      } else {\n        this.hideTooltip();\n      }\n    },\n    showPanel(graph) {\n      this.loaded = true;\n      let unsorted = [];\n      graph.forEachNode(node => {\n        unsorted.push({\n          name: node.data.name,\n          id: node.id\n        });\n      });\n      let ourNodes = this.nodes;\n      unsorted.sort((a, b) => {\n        return a.name.localeCompare(b.name)\n      }).forEach(x => ourNodes.push(x));\n    },\n    showDetails(nodeId, updateViewBox) {\n      this.details = this.scene.getDetails(nodeId);\n      this.hideTooltip();\n\n      this.scene.showNode(nodeId, updateViewBox);\n    },\n    hideTooltip() {\n      this.tooltip = null;\n      clearTimeout(this.tooltipTimeout);\n    },\n    handleImageClick(nodeId, event) {\n      if (event.ctrlKey || event.metaKey) {\n        return;\n      } else {\n        event.preventDefault();\n        this.showDetails(nodeId, true);\n      }\n    },\n    getLink(nodeId) {\n      let details = this.scene.getDetails(nodeId);\n      return `https://anvaka.github.io/city-roads/?areaId=${nodeId}&q=${details.main.name}`;\n    }\n  },\n  mounted() {\n    const canvas = document.getElementById('cnv');\n    this.scene = createGraphScene(canvas);\n    bus.on('show-tooltip', this.showTooltip);\n    bus.on('graph-ready', this.showPanel);\n    bus.on('focus-node', this.showDetails);\n  },\n  beforeDestroy() {\n    if (this.scene) {\n      this.scene.dispose();\n    }\n    bus.off('show-tooltip', this.showTooltip);\n    bus.off('graph-ready', this.showPanel);\n    bus.off('focus-node', this.showDetails);\n  }\n\n}\n</script>\n\n<style>\n#app {\n  position: absolute;\n  width: 420px;\n}\n.control-panel {\n  display: flex;\n}\n.control-panel .btn-header {\n  flex: 1;\n}\n.sidebar {\n  width: 100%;\n  overflow-y: auto;\n  max-height: 100vh;\n  background: #010129;\n  border: 1px solid #343536;\n  padding: 8px;\n}\n\n.btn-command {\n  display: block;\n  padding: 4px;\n  margin-top: 10px;\n  border: 1px solid;\n}\n\na {\n  color: rgb(244, 244, 244);\n  text-decoration: none;\n}\n\n.city-name {\n  border-top: 1px solid transparent;\n  border-bottom: 1px solid transparent;\n  display: block;\n  height: 32px;\n  line-height: 32px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.city-name:hover {\n  border-color: #90ee90;\n  color: #90ee90;\n}\n\n.tooltip {\n  position: fixed;\n  background: rgba(33,33,33, 0.2);\n  border: 1px solid border-hover;\n  color: white;\n  padding: 8px;\n  pointer-events: none;\n  transform: translateY(calc(-100% - 8px));\n  font-family: monospace;\n}\n\n.tooltip img {\n  width: 800px;\n}\n\n.main-image {\n  width: 100%;\n}\n.filter-box {\n  appearance: none;\n  outline: none;\n  background-color: #001b42;\n  border: 1px solid #002b52;\n  border-radius: 4px;\n  color: white;\n  padding-left: 8px;\n  caret-color: #90ee90;\n  width: 100%;\n  height: 32px;\n}\n\n.filter-box:focus, .filter-box:hover {\n  border-color: #90ee90;\n}\n\n.secondary {\n  display: flex;\n  flex-flow: row wrap;\n  justify-content: space-around;\n}\n\n.secondary .related{\n  padding: 4px;\n  width: calc( (100% / 2) - 8px );\n}\n.secondary .related a {\n  display: block;\n}\n\n/* .secondary .related {\n  width: 180px;\n  height: 180px;\n  margin: 4px;\n} */\n.secondary .related p {\n  margin: 0;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n  color: white;\n}\n.secondary .related img {\n  width: 100%;\n}\n.btn-header {\n  display: flex;\n  height: 42px;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid #ddd;\n}\n.score {\n  color: #90ee90;\n}\n.main-title {\n  color: #F6F2E9;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n}\n\n.fade-enter-active, .fade-leave-active {\n  transition: opacity .30s\n}\n.fade-enter, .fade-leave-to /* .fade-leave-active in <2.1.8 */ {\n  opacity: 0\n}\n.list-container {\n  margin-top: 12px;\n}\n.info {\n  color: #efefef;\n  text-align: center;\n}\n\n.loading {\n  font-size: 21;\n  margin: 8px;\n  color: #90ee90;\n}\n.about {\n  padding-top: 8px;\n  color: #efefef;\n}\n.about p{\n  margin: 4px 0;\n}\n.about .byline{\n  font-size: 12px;\n}\n.about a{\n  color: #90ee90;\n}\n.more-info {\n  float: right;\n}\n@media (max-height: 900px) {\n  .tooltip img {\n    max-width: 50vh;\n  }\n}\n@media (max-width: 600px) {\n  #app {\n    width: 100%;\n  }\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=63d3e942&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/**\n * Handles dropped files into the browser.\n */\nexport default function fileDrop(dropHandler, onDropped) {\n  dropHandler.addEventListener('drop', handleDrop, true);\n  dropHandler.addEventListener('dragover', handleDragOver);\n  dropHandler.addEventListener('dragenter', prevent);\n  dropHandler.addEventListener('dragleave', handleDragEnd)\n  dropHandler.addEventListener('dragend', handleDragEnd);\n\n  return {\n    dispose\n  }\n\n  function dispose() {\n    dropHandler.removeEventListener('drop', handleDrop);\n    dropHandler.removeEventListener('dragover', handleDragOver);\n    dropHandler.removeEventListener('dragenter', prevent);\n    dropHandler.removeEventListener('dragleave', handleDragEnd)\n    dropHandler.removeEventListener('dragend', handleDragEnd);\n  }\n\n  function prevent(e) {\n    if (!hasFiles(e)) return;\n\n    e.preventDefault();\n  }\n\n  function handleDrop(ev) {\n    handleDragEnd();\n    ev.preventDefault();\n    // If dropped items aren't files, reject them\n    var dt = ev.dataTransfer;\n    var files = []\n    var i, file;\n    if (dt.items) {\n      // Use DataTransferItemList interface to access the file(s)\n      for (i = 0; i < dt.items.length; i++) {\n        if (dt.items[i].kind == \"file\") {\n          file = dt.items[i].getAsFile();\n          files.push(file);\n        }\n      }\n    } else {\n      // Use DataTransfer interface to access the file(s)\n      for (i = 0; i < dt.files.length; i++) {\n        file = dt.files[i];\n        files.push(file);\n      } \n    }\n\n    onDropped(files);\n  }\n\n\n  function handleDragOver(e) {\n    if (!hasFiles(e)) return;\n\n    e.preventDefault();\n    dropHandler.classList.add('drag-over');\n  }\n\n  function hasFiles(e) {\n    if (!e.dataTransfer) return false;\n    if (e.dataTransfer.files && e.dataTransfer.files.length > 0) return true;\n    var items = e.dataTransfer.items;\n    if (!items) return false;\n    for (var i = 0; i < items.length; ++i) {\n      if (items[i].kind === 'file') return true;\n    }\n\n    return false;\n  }\n\n  function handleDragEnd() {\n    dropHandler.classList.remove('drag-over');\n  }\n}","import fromDot from 'ngraph.fromdot';\nimport fromJson from 'ngraph.fromjson';\nimport bus from './bus.js';\n\n/**\n * Loads graph from a dropped file\n */\nexport default function loadDroppedGraph(files) {\n  let file = files[0];\n\n  var reader = new FileReader();\n  reader.readAsText(file, \"UTF-8\");\n  reader.onload = e => {\n    let content = e.target.result;\n    let graph = tryDot(content) || tryJson(content);\n    if (graph) bus.fire('load-graph', graph);\n  }\n  reader.onerror = (e) => {\n    //eslint-disable-next-line\n    console.log('error loading dot file: ', e)\n  };\n\n  function tryDot(fileContent) {\n    try {\n      return fromDot(fileContent);\n    } catch (e) {\n      //eslint-disable-next-line\n      console.log('error loading dot file: ', e)\n    }\n  }\n  function tryJson(fileContent) {\n    try {\n      return fromJson(JSON.parse(fileContent));\n    } catch (e) {\n      //eslint-disable-next-line\n      console.log('error loading JSON: ', e)\n    }\n  }\n}","import Vue from 'vue'\nimport App from './App.vue'\nimport fileDrop from './lib/fileDrop.js';\nimport loadDroppedGraph from './lib/loadDroppedGraph.js';\n\nVue.config.productionTip = false\n\nnew Vue({\n  render: h => h(App),\n}).$mount('#app')\n\n// When they drop a `.dot` file into the browser - let's load it.\nfileDrop(document.body, loadDroppedGraph);"],"sourceRoot":""}